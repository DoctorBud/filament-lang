{
RED << [1,0,0]
GREEN << [0,1,0]
BLUE << [0,0,1]

w << 3
h << 3

spheres << [
    [[-1,0,-1],0.25,RED],
    [[0,0,-1], 0.5,BLUE],
    [[1,0,-1],0.25, GREEN]
]

intersect << (obj, ray) -> {
//  print("intersecting")
//  print(obj)
//  print("with")
  print(ray)
  [false,-1]
}

trace << (x,y) -> {
    u << x/w
    v << y/h

    ray << [ [0,0,0], [-2+u*4, 1-v*2, -1]]
    spheres >> map(with: (obj) -> intersect(obj,ray)) >> sort(by:"distance") >> hits

    BLUE
}

//make_image(width:w, height:h) >> map_image(with:trace)
trace(1,1)

}

